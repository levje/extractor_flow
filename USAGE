ExtractorFlow pipeline
======================

Run ExtractorFlow pipeline.
Either your tractograms are already in the JHU template space or if you provide a t1 (diff space) it will register everything into the JHU space.
T1s have to be BET. if not, please use the option run_bet.

USAGE

nextflow run main.nf [OPTIONAL_ARGUMENTS] (--input)

DESCRIPTION

    --input=/path/to/[root]              Root folder containing multiple subjects

                                        [root]
                                        ├── S1
                                        │   └── *.trk
                                        │   └── *_t1.nii.gz (diff space, optional)
                                        └── S2
                                            └── *.trk
                                            └── *_t1.nii.gz (diff space, optional)
    --templates_dir=/path/to/templates_dir
                                        ABSOLUTE PATH to directory containing the templates
                                        and the filtering lists (e.g. JHU atlas). Structure
                                        should look like:
                                        [templates_dir]
                                        ├── templates_and_ROIs
                                        │   ├── JHU*.nii.gz
                                        └── filtering_lists
                                            └── filtering_list_*.txt


OPTIONAL ARGUMENTS (current value)


    --output_dir                        Directory where to write the final results.
                                        By default, will be in "./results_extractorflow"

    --run_bet                           Run bet if your t1s are not brain extracted ($run_bet).
    --orig                              Extract all trk in diffusion space (if t1 has been provided) ($orig).
    --keep_intermediate_steps           Keep intermediate steps ($keep_intermediate_steps). MUST be used if you need to debug.

    --quick_registration                If set, will choose antsRegistrationSyNQuick.sh instead of antsRegistrationSyN.sh ($quick_registration).

    --processes_major_filtering         Number of processes for the major filtering task ($processes_major_filtering).
    --processes                         The number of parallel processes to launch ($cpu_count).
                                        Only affects the local scheduler.

AVAILABLE PROFILES (using -profile option (e.g. -profile macos,extract_bundles))

docker                                  When this profile is used, all processes will execute within Docker containers (recommended).
apptainer                               When this profile is used, all processes will execute within Apptainer containers.
fully_reproducible                      When this profile is used, all the parameters will be set to have 100% reproducible results.
extract_bundles                         The flow will perform additional processing to extract all recognized bundles.